---
layout: post
category: news
title: "Device Tree and Product Life Cycles"
date: 2015-02-01 16:30
quote: Why do they always want to do it the hard way? 
quote_author: Wile E. Coyote, Genius
product_slug: devicetree
licensing: false
cc_by_sa: false
comments: true
---
<p>Imagine that <a hrel="http://en.wikipedia.org/wiki/Wile_E._Coyote_and_The_Road_Runner">Wile E. Coyote</a> has just finished watching<BR> 
<a href="http://www.pbs.org/wgbh/nova/military/rise-of-the-drones.html">"Rise of the Drones"</a> on PBS, and he has had a 
<a href="http://en.wikipedia.org/wiki/Eureka">"Eureka!"</a> moment. 
He immediately dials <a href="http://en.wikipedia.org/wiki/Acme_Corporation">Acme Corporation</a> and
orders several dozen <a href="http://terminator.wikia.com/wiki/HK-Drone">T-4 Aerial Drones</a>. As the new manager of 
<a href="http://en.wikipedia.org/wiki/Acme_Corporation">Acme Corporation</a>, you realize that 
<a hrel="http://en.wikipedia.org/wiki/Wile_E._Coyote_and_The_Road_Runner">Wile E. Coyote</a> will in all likelyhood <b><i>crash</i></b>
the majority of them, and you will need a good way to track warranty claims and product repairs; <br>
as he seems to have an unlimited line-of-credit, and he has also <br>
purchased the <b><i>platinum service plan</i></b> with every one of those Drones.
</p>
<!-- more -->
<p>
<h2>Manufacturing Traceability</h2>
<img class="illo" src="{{site.url.images}}/news/devicetree/quad-px4.png" alt="PX4 Drone" title="PX4 Drone"/>
A Drone can be a pretty complex piece of gear, with a lot of parts and subsystems.
<a href="http://en.wikipedia.org/wiki/Traceability">Traceability</a> is the ability to verify the history, location, or application
of an item by means of documented recorded identification <a href="http://go.usa.gov/BP6">[1]</a>.
This can be very important with components, or sensors that have a limited life time,
typically measured in hours of use. As we repair and replace crashed Drones, we'll want a way
to keep track of the major parts and subsystems, like the 
<a href="http://www.tomshardware.com/reviews/multi-rotor-quadcopter-fpv,3828-4.html">Airframe</a>, 
<a href="http://beagleboard.org/project/BeagleDrone/">main computer</a>, 
<a href="http://pixhawk.org/modules/pixhawk">flight controller</a>, 
<a href="http://www.tomshardware.com/reviews/multi-rotor-quadcopter-fpv,3828-6.html">motor controllers</a>, and the 
<a href="http://www.tomshardware.com/reviews/multi-rotor-quadcopter-fpv,3828-5.html">rotors</a>.
</p>
<p>
One of the attributes that I like about the 
<a href="http://www.intel.com/content/www/us/en/servers/ipmi/information-storage-definition-rev-1-2.html">IPMI FRU</a> 
format for storing product information, <br>
is it's support of manufacturing traceability properties, such as :
<ul>
<li>product-model-name : "T-4 Aerial Drone"</li>
<li>product-mfg-name : ACME Corporation</li>
<li>product-mfg-date : (Univeral Time Code)</li>
<li>product-mfg-loc : (GPS coordinates)</li>
<li>product-asset-num : (ASSET TAG)</li>
<li>product-serial-num : (SERIAL NUMBER)/(UUID)</li>
</ul>
So, can we add these kinds of manufacturing traceability properties to the Device Tree?
It would seem to be exactly what we need to track the metadata for each subsystem, and follow it through it's whole lifecycle.
</p>
<p>
<h2>Drone Product Tree</h2>
Let's take a typical quadcopter type drone design, using a central mounting plate for the batteries and main electronics,
with four (4) or more motor arms to hold each of the motors and rotors. as we see above.
If we were to outline a simplified version of the part and subsystem heirarchy, it might look something like this : 
</p>
<p>
<img src="{{site.url.images}}/news/devicetree/quad-tree.png" alt="Example Drone Tree Nodes" title="Example Drone Tree Nodes"/>
</p>
<p>
<a href="http://www.st.com/web/en/catalog/mmc/FM76/CL1766/SC1412/SS1812">
<img class="illo" src="{{site.url.images}}/news/devicetree/rfid-tag-small.png" alt="RFID Asset Tag" title="RFID Asset Tag"/></a>Now, because you are the best manager that <a href="http://en.wikipedia.org/wiki/Acme_Corporation">Acme Corporation</a> has had
in quite a while, you have decided to use a 
<a href="http://www.st.com/web/en/catalog/mmc/FM76/CL1766/SC1412/SS1812">Dynamic NFC/RFID tag</a>
at the root of your product tree, namely on the Chassis (Air Frame) itself. 
This allows your service technicians to use an RFID reader/writer wand,
or their smartphone to interogate each Drone as it is tested or returned, and get the complete list of subassemblies,
their serial numbers, and dates of manufacture. 
</p>
<p>
The <a href="http://www.st.com/web/en/catalog/mmc/FM76/CL1766/SC1412/SS1812">Dynamic NFC/RFID tag</a> 
can be read/written either using the RF interface,
or from within the product itself - using the I2C interface to the tag.
This dual interface is important, as it allows the main processor on
the Flight controller to update the <a href="http://www.st.com/web/en/catalog/mmc/FM76/CL1766/SC1412/SS1812">Dynamic NFC/RFID tag</a> as well.
</p>
<p>
<a hrel="http://en.wikipedia.org/wiki/Wile_E._Coyote_and_The_Road_Runner">
<img class="illo" src="{{site.url.images}}/news/devicetree/wile-e-coyote.png" alt="Wile E. Coyote" title="Wile E. Coyote"/></a>
For example, once the Flight controller has read all the Device Tree information from each of the different
subsystems, it can update the inventory list contained within the 
<a href="http://www.st.com/web/en/catalog/mmc/FM76/CL1766/SC1412/SS1812">Dynamic NFC/RFID tag</a>.
If any subsystems are changed out, the the Flight controller can automatically update
the inventory list the next time it boots up. By designing each main subsystem to contain it's
own Device Tree Overlay, the complete view of the system inventory is rebuilt each time the Drone reboots.
Okay, so what that might look as you put all the subsystems together?
</p>
<p>
&nbsp;
</p>
<p>
to be continued...
</p>

