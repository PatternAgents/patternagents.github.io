---
layout: post
category: news
title: "New IoT SoCs"
date: 2015-06-19 7:47
quote: We're still in the first minutes of the first day of the internet revolution. 
quote_author: Scott Cook
product_slug: devicetree
licensing: false
cc_by_sa: false
comments: true
---
<p>
There have been a number of purpose built System-on-Chip (SoC) devices
intended for connecting to the Internet of Things (IoT). 
Examples include the 
<a href="http://www.esp8266.com/">ESP8266 (WiFi)</a>, the 
<a href="http://www.ti.com/product/cc2530">CC2530 (Zigbee)</a>, or the
<a href="http://www.st.com/web/catalog/sense_power/FM2185/SC1845/PF253167">Spirit1 (sub-1GHz)</a>,
for different wireless connection standards. 
In the Bluetooth & ANT IoT connectivity space, 
Nordic Semiconductor has been playing a winning hand with their ARM Cortex-M0 based nRF51822 IoT SoC,
and they have just seriously upped the ante with their new ARM Cortex-M4F based 
<a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC.
It's a multiprotocol RF SoC that supports Bluetooth Smart, ANT, 
Near Field Communication (NFC), Out-of-Band Pairing (OoB), Ultra-Low Power (ULP), and more.
</p>
<!-- more -->
<p>
<h3>nRF52832 - 2.4GHz Multiprotocol RF SoC</h3>
The new <a href="https://www.nordicsemi.com/">Nordic Semiconductor</a> Multiprotocol RF SoC IC has
just been announced, and the <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC
is a pretty amazing piece of design work. You can get an idea of the high level of integration just looking at the block diagram :
</p>
<a href="https://www.nordicsemi.com/eng/nordic/download_resource/48726/2/92931685"><img src="{{site.url.images}}/news/iot/nRF52832_block_diagram.png" alt="flattened device tree (FDT) EEPROM" title="nRF52832 Block Diagram"/></a>
<p>
<h3>nRF52832 - Hardware Features</h3>
A quick rundown of the IoT SoC hardware features - 
<br>and why we're really excited about working with this new RF platform : 
</p>
<p>
<ul>
<li>Multiprotocol 2.4Ghz Radio (Bluetooth Smart, ANT, Proprietary)</li>
<li>NFC-A Near Field Communication (use NFC for seamless Bluetooth pairing...)</li>
<li>64Mhz ARM Cortex-M4F (with Floating Point and DSP instructions)</li>
<li>512kB FLASH memory (enough for the stack AND your application)</li>
<li>64kB SRAM (enough to make use of those DSP instructions)</li>
<li>Twelve (12) Bit Analog-to-Digital Converter (200 kps ADC/Sensor Update Rate)</li>
<li>Memory mapped FIFOs memories with Direct Memory Access (EasyDMA)</li>
<li>Twenty (20) Channel Programmable Peripheral Interconnect <br>(PPI for non-CPU/autonomous I/O operations)</li>
<li>I2S Audio supported by DMA (Digital Audio Capabilities with ARM DSP)</li>
<li>128-Bit Security/Encryption Co-processor (AES ECB, CCM, AAR)</li>
<li>32KHz RTC clock/control oscillator (Real-Time Clock)</li>
<li>32MHz RTC clock/control oscillator (Bluetooth/RF Clock)</li>
<li>Internal DC-DC Buck Converter Power Supply (Low External Parts Count)</li>
<li>Power Management Interface Controller (PMIC for individual peripheral power control)</li>
<li>Prototype Friendly 48 Pin QFN Package (Hand Solder)</li>
<li>Mobile/Miniature/Production WL-CSP Package (Handset)</li>
</ul>
</p>
<p>
I have to say, this is an ideal RF architecture from my point of view,
and I think that the Nordic engineers came up with a really excellent SoC design.
If someone gave me a team of ASIC designers and a budget, it's pretty much what I'd want to design
for a Bluetooth Smart/ANT IoT System-on-Chip.
</p>
<h3>Improving the User Experience - Seamless Device Pairing</h3>
<a href="https://www.nordicsemi.com/eng/nordic/download_resource/48726/2/92931685"><img class="illo" src="{{site.url.images}}/news/iot/nfc_bluetooth_pair.png" alt="NFC Bluetooth Pairing" title="NFC Bluetooth Pairing"/></a>
<p>
By including a Near Field Communications (NFC-A) module with proximity detection and Wake-on-NFC capability,
the <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC
is really going to improve the user experience with seamless device pairing (no codes to enter),
and proximity operation.  The Near Field Communications (NFC-A) module can provide the pairing keys,
so that an authorized device can connect automatically - no fuss - no muss...
</p>
<p>
The proximity detection capability will enable a whole variety of "walk up - turn on" usage scenarios
and is a good addition to the NFC capability.
</p>
<h3>New 2.4GHz Multiprotocol Radio</h3>
<p>
The new 2.4GHz multiprotocol radio module supports 
Bluetooth Smart, and ANT as well as other proprietary protocols.
It is also backward compatible (on air compatible) with 
the earlier Nordic radios, like the nRF24AP, nRF24L and nRF51 Series.
The RF output power is now scalable from a maximum of +4dBm down to -20dBm in 4dB
steps; with increased sensitivity range(s) from -96dBm to -89dBm, depending on the data rate.
</p>
<h3>Autonomous Peripheral Communications</h3>
<p>
I wish that more ASSP/ASIC designers understood how offloading the peripheral communications from the CPU
to dedicated hardware can both lower the power budget <b>and</b> increase the I/O throughput. The Nordic team
clearly got that right with their new  Programmable Peripheral Interconnect (PPI) system, which provides a
twenty (20) channel bus for direct and autonomous peripheral communications, and offloads that work from the CPU.
That means the CPU can be sleeping more often, saving those precious microamps of battery power.  
</p>
<h3>ARM Cortex-M4F Central Processor</h3>
<p>
This was a really smart move by the Nordic team, as the ARM Cortex-M4F CPU is both powerful,
and still relatively power efficient. I've been using the ARM Cortex-M4F for a while now,
on the excellent <a href="https://www.pjrc.com/teensy/teensy31.html">Teensy 3.1</a> platform
designed by Paul Stoffregen, and it is a really nice processor architecture - with hardware support
for DSP instructions and floating point operations. 
</p>
<p>
Using the ARM Cortex-M4F Central Processor means that the 
<a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC
has enough CPU horsepower to handle a variety of tasks, especially with their PPI I/O offloading system.
One of the problems with using the <a href="http://www.ipso-alliance.org/technical-information/getting-started-with-smart-objects">Internet Protocol Smart Objects (ISPO)</a> standard is that the common sensor value returns are all in floating point format -
well no problem with the <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC,
it's got floating point operation covered. (Try that on an 8bit i8051 IoT SoC, and you'll be waiting a while...)
</p>
<h3>The Rundown</h3>
So, how does the new Nordic <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-Smart-Bluetooth-low-energy/nRF52832">nRF52832</a> IoT SoC
stack up against the other leading Bluetooth SoCs? <br>Here's a quick comparison :
</p>
<table border=2>
<tr align="center">
<td>Bluetooth SoC</td>
<td>Mode(s)</td>
<td>CPU</td>
<td>Flash</td>
<td>RAM</td>
<td>RX/TX Current</td>
<td>Price (1K)</td>
</tr>
<tr align="center">
<td>TI CC254x</td>
<td>Single Mode v4.0</td>
<td>8051</td>
<td>128kB/256kB</td>
<td>8kB</td>
<td>17.9mA / 18.2mA to 14.7mA / 14.3mA</td>
<td>~$5</td>
</tr>
<tr align="center">
<td>TI CC256x</td>
<td>Dual Mode Classic + BLE/ANT</td>
<td>External</td>
<td>External</td>
<td>External</td>
<td>15mA</td>
<td>~$2</td>
</tr>
<tr align="center">
<td>TI CC26xx</td>
<td>Single Mode BLE v4.1</td>
<td>Cortex-M3/M0</td>
<td>128kB</td>
<td>20kB</td>
<td>5.9mA</td>
<td>~$6</td>
</tr>
<tr align="center">
<td>Dialog DA14580</td>
<td>Single Mode BLE v4.1</td>
<td>Cortex-M0</td>
<td>32kB OTP</td>
<td>50kB</td>
<td>4.9mA</td>
<td>~$2</td>
</tr>

<tr align="center">
<td>CSR CSR101x</td>
<td>Single Mode BLE v4.1</td>
<td>16-bit RISC</td>
<td>64kB</td>
<td>64kB</td>
<td>16mA</td>
<td>~$2</td>
</tr>
<tr align="center">
<td>PSoC 4 BLE<br>PRoC BLE</td>
<td>Single Mode BLE v4.1</td>
<td>Cortex-M0</td>
<td>256/128kB</td>
<td>16/32kB</td>
<td>15.6mA / 16.4mA</td>
<td>~$3-$5</td>
</tr>
<tr align="center">
<td>Nordic nRF51822</td>
<td>Single Mode v4.1 / ANT</td>
<td>Cortex-M0</td>
<td>256/128kB</td>
<td>16/32kB</td>
<td>9.7mA / 8mA</td>
<td>~$2</td>
</tr>
<tr align="center">
<td>Nordic nRF52832</td>
<td>Multimode v4.1 / ANT</td>
<td>Cortex-M4F</td>
<td>512kB</td>
<td>64kB</td>
<td>T.B.D.</td>
<td>T.B.D.</td>
</tr>
</table>
<p>
<b>Note</b> : Prices averaged from 1K quantities using manufacturers data and <a href="http://www.findchips.com/">FindChips.com</a> 
<br>at the date of publication. Other data obtained from manufacturers data sheets.<br>
</p>

<h3>Critique/Improvements</h3>
<p>
I think the only change I might have made to this architecture would have been to go "Big-Little" with it. 
That is to say, keep the nRF51822 style Cortex-M0 as the "Little" CPU for the RF Stack and the PMIC functions,
and add the Cortex-M4F as the "Big" CPU for the application processor. Of course, that is going to add silicon area,
cost, and complexity; so the Nordic designers likely discarded that architecture in order to hit their cost targets.
</p>
<p>
The advantage of that architecture however, is the ability to overlap the operation of the RF stack(M0)
with the application code(M4F); as well as a measure of separation, so that the application code can't 
interfere with the RF stack (as easily). The M4F (with FPU running) takes more power than the M0,
so being able to switch back and forth (highest performance/lowest power) might afford a small degree of power savings as well.
</p>
<p>
All in all, that is a pretty minor critique. It looks like the Nordic design team did a really nice job on this new IoT SoC.
</p>
<h3>First Look Summary</h3>
<p>
The specificiations look excellent, and we're looking forward to getting the reference designs to start working with.
The part has just been announced, so we also haven't seen any production/distribution pricing for the part yet.
But just based on the specifications, I willing to bet this part will be one of the more popular 
Bluetooth Smart/ANT RF platforms for the next generation of IoT/connected devices.
</p>



